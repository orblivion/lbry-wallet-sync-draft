<svg id="mermaid-1644377619624" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="1143.75" style="max-width: 2006.33px; background-color: white;" viewBox="0 0 2006.328125 1143.75"><style>#mermaid-1644377619624 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1644377619624 .error-icon{fill:#552222;}#mermaid-1644377619624 .error-text{fill:#552222;stroke:#552222;}#mermaid-1644377619624 .edge-thickness-normal{stroke-width:2px;}#mermaid-1644377619624 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1644377619624 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1644377619624 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1644377619624 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1644377619624 .marker{fill:#333333;stroke:#333333;}#mermaid-1644377619624 .marker.cross{stroke:#333333;}#mermaid-1644377619624 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1644377619624 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-1644377619624 .cluster-label text{fill:#333;}#mermaid-1644377619624 .cluster-label span{color:#333;}#mermaid-1644377619624 .label text,#mermaid-1644377619624 span{fill:#333;color:#333;}#mermaid-1644377619624 .node rect,#mermaid-1644377619624 .node circle,#mermaid-1644377619624 .node ellipse,#mermaid-1644377619624 .node polygon,#mermaid-1644377619624 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1644377619624 .node .label{text-align:center;}#mermaid-1644377619624 .node.clickable{cursor:pointer;}#mermaid-1644377619624 .arrowheadPath{fill:#333333;}#mermaid-1644377619624 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1644377619624 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1644377619624 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1644377619624 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1644377619624 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1644377619624 .cluster text{fill:#333;}#mermaid-1644377619624 .cluster span{color:#333;}#mermaid-1644377619624 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1644377619624 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-1644377619624 .start&gt;*{fill:#8f8!important;}#mermaid-1644377619624 .start span{fill:#8f8!important;}#mermaid-1644377619624 .finish&gt;*{fill:#f88!important;}#mermaid-1644377619624 .finish span{fill:#f88!important;}#mermaid-1644377619624 .editorNote&gt;*{fill:#CCC!important;}#mermaid-1644377619624 .editorNote span{fill:#CCC!important;}</style><g transform="translate(0, 0)"><marker id="flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M886.83203125,226.51797944328007L995.5553385416666,258.24414953606674C1104.2786458333333,289.97031962885336,1321.7252604166667,353.4226598144267,1430.4485677083333,395.31549657388C1539.171875,437.2083333333333,1539.171875,457.5416666666667,1539.171875,467.7083333333333L1539.171875,477.875" id="L-Login-MergeLoggedInLoggedOut-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Login LE-MergeLoggedInLoggedOut" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M666.95703125,251.59492237073965L613.9733072916666,279.14160197561637C560.9895833333334,306.6882815804931,455.0221354166667,361.7816407902465,402.0384114583333,395.3283203951232C349.0546875,428.875,349.0546875,440.875,349.0546875,446.875L349.0546875,452.875" id="L-Login-DataError-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Login LE-DataError" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M867.5562482438887,380.875L870.4739568699073,386.875C873.3916654959257,392.875,879.2270827479629,404.875,882.1447913739815,459.1979166666667C885.0625,513.5208333333334,885.0625,610.1666666666666,885.0625,706.8125C885.0625,803.4583333333334,885.0625,900.1041666666666,920.57421875,959.0275963930349C956.0859375,1017.9510261194031,1027.109375,1039.152052238806,1062.62109375,1049.7525652985075L1098.1328125,1060.353078358209" id="L-Login-LoggedInHomeScreen-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Login LE-LoggedInHomeScreen" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M1232.9420596774628,935.75L1219.3429924395523,945.9166666666666C1205.7439252016418,956.0833333333334,1178.5457907258208,976.4166666666666,1166.7871699164818,992.5833333333334C1155.028549107143,1008.75,1158.7094419642856,1020.75,1160.549888392857,1026.75L1162.3903348214285,1032.75" id="L-MergeLoggedInLoggedOut-LoggedInHomeScreen-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-MergeLoggedInLoggedOut LE-LoggedInHomeScreen" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M1453.7613836158116,935.75L1449.96847072151,945.9166666666666C1446.1755578272077,956.0833333333334,1438.5897320386039,976.4166666666666,1406.0031993526354,996.5488326818189C1373.4166666666667,1016.6809986969711,1315.8294270833333,1036.6119973939421,1287.0358072916667,1046.5774967424277L1258.2421875,1056.5429960909132" id="L-MergeLoggedInLoggedOut-LoggedInHomeScreen-1" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-MergeLoggedInLoggedOut LE-LoggedInHomeScreen" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M1617.5714947321621,935.75L1621.0530685268016,945.9166666666666C1624.5346423214414,956.0833333333334,1631.4977899107207,976.4166666666666,1634.9793637053601,992.5833333333334C1638.4609375,1008.75,1638.4609375,1020.75,1638.4609375,1026.75L1638.4609375,1032.75" id="L-MergeLoggedInLoggedOut-LoggedOutHomeScreen-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-MergeLoggedInLoggedOut LE-LoggedOutHomeScreen" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(1539.171875, 416.875)"><g class="label" transform="translate(-148.390625, -11)"><foreignObject width="296.78125" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><big><b>Log In</b></big> - <i>Existing pre-login local changes</i></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(349.0546875, 416.875)"><g class="label" transform="translate(-72.78125, -11)"><foreignObject width="145.5625" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><big><b>Log In</b></big> - <i>Data Error<i></i></i></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(885.0625, 706.8125)"><g class="label" transform="translate(-159.953125, -11)"><foreignObject width="319.90625" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><big><b>Log In</b></big> - <i>No existing pre-login local changes</i></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1151.34765625, 996.75)"><g class="label" transform="translate(-128.4765625, -11)"><foreignObject width="256.953125" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><big><b>Discard logged out changes</b></big></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1431.00390625, 996.75)"><g class="label" transform="translate(-121.5390625, -11)"><foreignObject width="243.078125" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><big><b>Merge logged out changes</b></big></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1638.4609375, 996.75)"><g class="label" transform="translate(-57.0390625, -11)"><foreignObject width="114.078125" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><big><b>Cancel login</b></big></span></div></foreignObject></g></g></g><g class="nodes"><g class="root" transform="translate(659.45703125, 0)"><g class="clusters"><g class="cluster start" id="Login"><rect style="" rx="0" ry="0" x="8" y="8" width="219.875" height="372.875"></rect><g class="cluster-label" transform="translate(98.359375, 13)"><foreignObject width="39.15625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Login</span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default default" id="flowchart-Login1-52" transform="translate(117.9375, 115.21875)"><rect class="basic label-container" style="" rx="0" ry="0" x="-84.9375" y="-72.21875" width="169.875" height="144.4375"></rect><g class="label" style="" transform="translate(-77.4375, -64.71875)"><foreignObject width="154.875" height="129.4375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><h3>Enter Credentials</h3><ul><li>Server</li><li>Email</li><li>Password</li></ul></span></div></foreignObject></g></g><g class="node default default" id="flowchart-Login2-53" transform="translate(117.9375, 291.65625)"><rect class="basic label-container" style="" rx="0" ry="0" x="-49.7421875" y="-54.21875" width="99.484375" height="108.4375"></rect><g class="label" style="" transform="translate(-42.2421875, -46.71875)"><foreignObject width="84.484375" height="93.4375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><h3>Buttons</h3><ul><li>Log In</li></ul></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(0.5, 444.875)"><g class="clusters"><g class="cluster default" id="DataError"><rect style="" rx="0" ry="0" x="8" y="8" width="682.109375" height="507.875"></rect><g class="cluster-label" transform="translate(314.375, 13)"><foreignObject width="69.359375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">DataError</span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default default" id="flowchart-DataError1-49" transform="translate(349.0546875, 132.21875)"><rect class="basic label-container" style="" rx="0" ry="0" x="-118.671875" y="-89.21875" width="237.34375" height="178.4375"></rect><g class="label" style="" transform="translate(-111.171875, -81.71875)"><foreignObject width="222.34375" height="163.4375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><h3>Error</h3><i>One of the following</i><ul><li>Corrupt wallet JSON</li><li>Signature does not match</li><li>Sequence error</li></ul></span></div></foreignObject></g></g><g class="node default default" id="flowchart-DataError2-50" transform="translate(349.0546875, 325.65625)"><rect class="basic label-container" style="" rx="0" ry="0" x="-66.0390625" y="-54.21875" width="132.078125" height="108.4375"></rect><g class="label" style="" transform="translate(-58.5390625, -46.71875)"><foreignObject width="117.078125" height="93.4375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><h3>Buttons</h3><ul><li>??? <i>TODO</i></li></ul></span></div></foreignObject></g></g><g class="node default editorNote" id="flowchart-DataError3-31" transform="translate(349.0546875, 455.375)"><rect class="basic label-container" style="" rx="0" ry="0" x="-316.0546875" y="-25.5" width="632.109375" height="51"></rect><g class="label" style="" transform="translate(-308.5546875, -18)"><foreignObject width="617.109375" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><i>this is a complicated part<br/>This might be Error Recovery Mode, or Error Recovery Mode may be split off from here</i></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(1072.515625, 469.875)"><g class="clusters"><g class="cluster default" id="MergeLoggedInLoggedOut"><rect style="" rx="0" ry="0" x="8" y="8" width="918.3125" height="457.875"></rect><g class="cluster-label" transform="translate(371.5234375, 13)"><foreignObject width="191.265625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MergeLoggedInLoggedOut</span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default default" id="flowchart-MergeLoggedInLoggedOut1-46" transform="translate(467.15625, 89.21875)"><rect class="basic label-container" style="" rx="0" ry="0" x="-387.5625" y="-46.21875" width="775.125" height="92.4375"></rect><g class="label" style="" transform="translate(-380.0625, -38.71875)"><foreignObject width="760.125" height="77.4375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><h3>Prompt</h3>Before you logged in, you took some actions that were saved to your wallet. Would you like to merge them?</span></div></foreignObject></g></g><g class="node default default" id="flowchart-MergeLoggedInLoggedOut2-47" transform="translate(467.15625, 257.65625)"><rect class="basic label-container" style="" rx="0" ry="0" x="-126.6796875" y="-72.21875" width="253.359375" height="144.4375"></rect><g class="label" style="" transform="translate(-119.1796875, -64.71875)"><foreignObject width="238.359375" height="129.4375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><h3>Buttons</h3><ul><li>Discard logged out changes</li><li>Merge logged out changes</li><li>Don't log in for now</li></ul></span></div></foreignObject></g></g><g class="node default editorNote" id="flowchart-MergeLoggedInLoggedOut3-30" transform="translate(467.15625, 405.375)"><rect class="basic label-container" style="" rx="0" ry="0" x="-434.15625" y="-25.5" width="868.3125" height="51"></rect><g class="label" style="" transform="translate(-426.65625, -18)"><foreignObject width="853.3125" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><i>this is a complicated part<br/>this is unlike normal conflict resolution because the baseline is zero, and also the logged out wallet's keypair is discarded</i></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(1599.2890625, 1024.75)"><g class="clusters"><g class="cluster finish" id="LoggedOutHomeScreen"><rect style="" rx="0" ry="0" x="-39.109375" y="8" width="172.5625" height="103"></rect><g class="cluster-label" transform="translate(-39.109375, 13)"><foreignObject width="172.5625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">LoggedOutHomeScreen</span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default default" id="flowchart-LoggedOutHomeScreen1-45" transform="translate(47.171875, 59.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-14.171875" y="-16.5" width="28.34375" height="33"></rect><g class="label" style="" transform="translate(-6.671875, -9)"><foreignObject width="13.34375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">...</span></div></foreignObject></g></g></g></g><g class="root" transform="translate(1139.015625, 1024.75)"><g class="clusters"><g class="cluster finish" id="LoggedInHomeScreen"><rect style="" rx="0" ry="0" x="-32.8828125" y="8" width="160.109375" height="103"></rect><g class="cluster-label" transform="translate(-32.8828125, 13)"><foreignObject width="160.109375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">LoggedInHomeScreen</span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default default" id="flowchart-LoggedInHomeScreen1-44" transform="translate(47.171875, 59.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-14.171875" y="-16.5" width="28.34375" height="33"></rect><g class="label" style="" transform="translate(-6.671875, -9)"><foreignObject width="13.34375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">...</span></div></foreignObject></g></g></g></g></g></g></g></svg>