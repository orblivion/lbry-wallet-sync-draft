<svg id="mermaid-1638972522835" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="609" style="max-width: 1947.0625px;" viewBox="0 0 1947.0625 609"><style>#mermaid-1638972522835 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1638972522835 .error-icon{fill:#552222;}#mermaid-1638972522835 .error-text{fill:#552222;stroke:#552222;}#mermaid-1638972522835 .edge-thickness-normal{stroke-width:2px;}#mermaid-1638972522835 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1638972522835 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1638972522835 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1638972522835 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1638972522835 .marker{fill:#333333;stroke:#333333;}#mermaid-1638972522835 .marker.cross{stroke:#333333;}#mermaid-1638972522835 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1638972522835 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1638972522835 g.classGroup text .title{font-weight:bolder;}#mermaid-1638972522835 .nodeLabel,#mermaid-1638972522835 .edgeLabel{color:#131300;}#mermaid-1638972522835 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1638972522835 .label text{fill:#131300;}#mermaid-1638972522835 .edgeLabel .label span{background:#ECECFF;}#mermaid-1638972522835 .classTitle{font-weight:bolder;}#mermaid-1638972522835 .node rect,#mermaid-1638972522835 .node circle,#mermaid-1638972522835 .node ellipse,#mermaid-1638972522835 .node polygon,#mermaid-1638972522835 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1638972522835 .divider{stroke:#9370DB;stroke:1;}#mermaid-1638972522835 g.clickable{cursor:pointer;}#mermaid-1638972522835 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1638972522835 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1638972522835 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1638972522835 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1638972522835 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1638972522835 .dashed-line{stroke-dasharray:3;}#mermaid-1638972522835 #compositionStart,#mermaid-1638972522835 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1638972522835 #compositionEnd,#mermaid-1638972522835 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1638972522835 #dependencyStart,#mermaid-1638972522835 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1638972522835 #dependencyStart,#mermaid-1638972522835 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1638972522835 #extensionStart,#mermaid-1638972522835 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1638972522835 #extensionEnd,#mermaid-1638972522835 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1638972522835 #aggregationStart,#mermaid-1638972522835 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1638972522835 #aggregationEnd,#mermaid-1638972522835 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1638972522835 .edgeTerminals{font-size:11px;}#mermaid-1638972522835 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M624.09765625,100.16085930652311L769.2701822916666,118.30071608876926C914.4427083333334,136.4405728710154,1204.7877604166667,172.7202864355077,1349.9602864583333,198.36014321775383C1495.1328125,224,1495.1328125,239,1495.1328125,246.5L1495.1328125,254" id="id1" class="  edge-pattern-solid relation" style="fill:none" marker-end="url(#classDiagram-extensionEnd)"></path><path d="M624.09765625,158.9534925102721L632.6686197916666,167.29457709189342C641.2395833333334,175.63566167351473,658.3815104166666,192.31783083675737,666.9524739583334,206.32558208504534C675.5234375,220.33333333333334,675.5234375,231.66666666666666,675.5234375,237.33333333333334L675.5234375,243" id="id2" class="  edge-pattern-solid relation" style="fill:none" marker-end="url(#classDiagram-extensionEnd)"></path><path d="M485.47265625,112.20406450780033L431.4641927083333,128.33672042316695C377.4557291666667,144.46937633853355,269.4388020833333,176.73468816926678,215.43033854166666,216.1173440846334C161.421875,255.5,161.421875,302,161.421875,348.5C161.421875,395,161.421875,441.5,246.97200520833334,475.1311483867639C332.5221354166667,508.76229677352785,503.6223958333333,529.5245935470557,589.1725260416666,539.9057419338196L674.72265625,550.2868903205836" id="id3" class="  edge-pattern-solid relation" style="fill:none" marker-end="url(#classDiagram-extensionEnd)"></path><path d="M1051.203125,435.2071225819154L1006.154296875,444.0059354849295C961.10546875,452.8047483879436,871.0078125,470.4023741939718,824.896484375,484.8678537636526C778.78515625,499.3333333333333,776.66015625,510.6666666666667,775.59765625,516.3333333333334L774.53515625,522" id="id4" class="  edge-pattern-solid relation" style="fill:none" marker-end="url(#classDiagram-extensionEnd)"></path><path d="M1413.3423639112902,443L1406.8510584677417,450.5C1400.3597530241934,458,1387.3771421370966,473,1295.075940860215,490.88594493760456C1202.7747395833333,508.77188987520907,1031.1549479166667,529.5437797504181,945.3450520833334,539.9297246880227L859.53515625,550.3156696256272" id="id5" class="  edge-pattern-solid relation" style="fill:none" marker-end="url(#classDiagram-extensionEnd)"></path><path d="M1548.9082661290322,443L1553.1761592741934,450.5C1557.4440524193549,458,1565.9798387096773,473,1570.2477318548388,486.1666666666667C1574.515625,499.3333333333333,1574.515625,510.6666666666667,1574.515625,516.3333333333334L1574.515625,522" id="id6" class="  edge-pattern-solid relation" style="fill:none" marker-end="url(#classDiagram-extensionEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(1495.1328125, 209)"><g class="label" transform="translate(-141.859375, -9)"><foreignObject width="283.71875" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">Log In - Existing pre-login local changes</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(675.5234375, 209)"><g class="label" transform="translate(-66.25, -9)"><foreignObject width="132.5" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">Log In - Data Error</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(161.421875, 348.5)"><g class="label" transform="translate(-153.421875, -9)"><foreignObject width="306.84375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">Log In - No existing pre-login local changes</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(780.91015625, 488)"><g class="label" transform="translate(-99.1796875, -9)"><foreignObject width="198.359375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">Discard logged out changes</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1374.39453125, 488)"><g class="label" transform="translate(-94.734375, -9)"><foreignObject width="189.46875" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">Merge logged out changes</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1574.515625, 488)"><g class="label" transform="translate(-44.03125, -9)"><foreignObject width="88.0625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">Cancel login</span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="classid-Login-0" transform="translate(554.78515625, 91.5)"><rect class="outer title-state" x="-69.3125" y="-83.5" width="138.625" height="167"></rect><line class="divider" x1="-69.3125" x2="69.3125" y1="-53.5" y2="-53.5"></line><line class="divider" x1="-69.3125" x2="69.3125" y1="50.5" y2="50.5"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="43.546875" height="18" transform="translate( -21.7734375, -76)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Login</span></div></foreignObject><foreignObject width="123.625" height="18" transform="translate( -61.8125, -42)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Enter Credentials</span></div></foreignObject><foreignObject width="66.6875" height="18" transform="translate( -61.8125, -20)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">* [Server]</span></div></foreignObject><foreignObject width="59.578125" height="18" transform="translate( -61.8125, 2)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">* [Email]</span></div></foreignObject><foreignObject width="89.8125" height="18" transform="translate( -61.8125, 24)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">* [Password]</span></div></foreignObject><foreignObject width="55.140625" height="18" transform="translate( -61.8125, 58)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Log In()</span></div></foreignObject></g></g><g class="node default" id="classid-MergeLoggedInLoggedOut-1" transform="translate(1495.1328125, 348.5)"><rect class="outer title-state" x="-443.9296875" y="-94.5" width="887.859375" height="189"></rect><line class="divider" x1="-443.9296875" x2="443.9296875" y1="-64.5" y2="-64.5"></line><line class="divider" x1="-443.9296875" x2="443.9296875" y1="17.5" y2="17.5"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="204.421875" height="18" transform="translate( -102.2109375, -87)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MergeLoggedInLoggedOut</span></div></foreignObject><foreignObject width="760.125" height="18" transform="translate( -436.4296875, -53)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Before you logged in, you took some actions that were saved to your wallet. Would you like to merge them?</span></div></foreignObject><foreignObject width="195.625" height="18" transform="translate( -436.4296875, -31)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">- this is a complicated part -</span></div></foreignObject><foreignObject width="872.859375" height="18" transform="translate( -436.4296875, -9)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">- this is unlike normal conflict resolution because the baseline is zero, and also the logged out wallet's keypair is discarded -</span></div></foreignObject><foreignObject width="209.015625" height="18" transform="translate( -436.4296875, 25)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Discard logged out changes()</span></div></foreignObject><foreignObject width="200.125" height="18" transform="translate( -436.4296875, 47)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Merge logged out changes()</span></div></foreignObject><foreignObject width="147.125" height="18" transform="translate( -436.4296875, 69)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Don't log in for now()</span></div></foreignObject></g></g><g class="node default" id="classid-DataError-2" transform="translate(675.5234375, 348.5)"><rect class="outer title-state" x="-325.6796875" y="-105.5" width="651.359375" height="211"></rect><line class="divider" x1="-325.6796875" x2="325.6796875" y1="-75.5" y2="-75.5"></line><line class="divider" x1="-325.6796875" x2="325.6796875" y1="72.5" y2="72.5"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="73.8125" height="18" transform="translate( -36.90625, -98)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">DataError</span></div></foreignObject><foreignObject width="108.484375" height="18" transform="translate( -318.1796875, -64)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Possible Errors</span></div></foreignObject><foreignObject width="156.5" height="18" transform="translate( -318.1796875, -42)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">* Corrupt wallet JSON</span></div></foreignObject><foreignObject width="193.015625" height="18" transform="translate( -318.1796875, -20)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">* Signature does not match</span></div></foreignObject><foreignObject width="120.96875" height="18" transform="translate( -318.1796875, 2)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">* Sequence error</span></div></foreignObject><foreignObject width="636.359375" height="18" transform="translate( -318.1796875, 24)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">- This might be Error Recovery Mode, or Error Recovery Mode may be split off from here -</span></div></foreignObject><foreignObject width="195.625" height="18" transform="translate( -318.1796875, 46)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">- this is a complicated part -</span></div></foreignObject><foreignObject width="37.359375" height="18" transform="translate( -318.1796875, 80)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">???()</span></div></foreignObject></g></g><g class="node default" id="classid-LoggedInHomeScreen-3" transform="translate(767.12890625, 561.5)"><rect class="outer title-state" x="-92.40625" y="-39.5" width="184.8125" height="79"></rect><line class="divider" x1="-92.40625" x2="92.40625" y1="-9.5" y2="-9.5"></line><line class="divider" x1="-92.40625" x2="92.40625" y1="28.5" y2="28.5"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="169.8125" height="18" transform="translate( -84.90625, -32)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">LoggedInHomeScreen</span></div></foreignObject><foreignObject width="13.34375" height="18" transform="translate( -84.90625, 2)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">...</span></div></foreignObject></g></g><g class="node default" id="classid-LoggedOutHomeScreen-4" transform="translate(1574.515625, 561.5)"><rect class="outer title-state" x="-99.0703125" y="-39.5" width="198.140625" height="79"></rect><line class="divider" x1="-99.0703125" x2="99.0703125" y1="-9.5" y2="-9.5"></line><line class="divider" x1="-99.0703125" x2="99.0703125" y1="28.5" y2="28.5"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="183.140625" height="18" transform="translate( -91.5703125, -32)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">LoggedOutHomeScreen</span></div></foreignObject><foreignObject width="13.34375" height="18" transform="translate( -91.5703125, 2)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">...</span></div></foreignObject></g></g></g></g></g></svg>