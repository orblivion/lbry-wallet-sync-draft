<svg id="mermaid-1644379225244" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="819.875" style="max-width: 1624.59px; background-color: white;" viewBox="0 0 1624.59375 819.875"><style>#mermaid-1644379225244 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1644379225244 .error-icon{fill:#552222;}#mermaid-1644379225244 .error-text{fill:#552222;stroke:#552222;}#mermaid-1644379225244 .edge-thickness-normal{stroke-width:2px;}#mermaid-1644379225244 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1644379225244 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1644379225244 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1644379225244 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1644379225244 .marker{fill:#333333;stroke:#333333;}#mermaid-1644379225244 .marker.cross{stroke:#333333;}#mermaid-1644379225244 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1644379225244 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-1644379225244 .cluster-label text{fill:#333;}#mermaid-1644379225244 .cluster-label span{color:#333;}#mermaid-1644379225244 .label text,#mermaid-1644379225244 span{fill:#333;color:#333;}#mermaid-1644379225244 .node rect,#mermaid-1644379225244 .node circle,#mermaid-1644379225244 .node ellipse,#mermaid-1644379225244 .node polygon,#mermaid-1644379225244 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1644379225244 .node .label{text-align:center;}#mermaid-1644379225244 .node.clickable{cursor:pointer;}#mermaid-1644379225244 .arrowheadPath{fill:#333333;}#mermaid-1644379225244 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1644379225244 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1644379225244 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1644379225244 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1644379225244 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1644379225244 .cluster text{fill:#333;}#mermaid-1644379225244 .cluster span{color:#333;}#mermaid-1644379225244 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1644379225244 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-1644379225244 .startGrey&gt;*{fill:#efe!important;stroke:#aea!important;color:#aea!important;}#mermaid-1644379225244 .startGrey span{fill:#efe!important;stroke:#aea!important;color:#aea!important;}#mermaid-1644379225244 .finishGrey&gt;*{fill:#fee!important;stroke:#eaa!important;color:#eaa!important;}#mermaid-1644379225244 .finishGrey span{fill:#fee!important;stroke:#eaa!important;color:#eaa!important;}#mermaid-1644379225244 .editorNote&gt;*{fill:#CCC!important;}#mermaid-1644379225244 .editorNote span{fill:#CCC!important;}</style><g transform="translate(0, 0)"><marker id="flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M467.15625,111L467.15625,116.66666666666667C467.15625,122.33333333333333,467.15625,133.66666666666666,467.15625,145C467.15625,156.33333333333334,467.15625,167.66666666666666,467.15625,173.33333333333334L467.15625,179" id="L-Login-MergeLoggedInLoggedOut-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Login LE-MergeLoggedInLoggedOut" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M347.5939241640127,636.875L344.46043159501056,642.875C341.32693902600846,648.875,335.05995388800426,660.875,341.6445602773354,673.0206598251508C348.2291666666667,685.1663196503017,367.6653645833333,697.4576393006032,377.3834635416667,703.603299125754L387.1015625,709.7489589509048" id="L-MergeLoggedInLoggedOut-LoggedInHomeScreen-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-MergeLoggedInLoggedOut LE-LoggedInHomeScreen" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M586.7185758359873,636.875L589.8520684049894,642.875C592.9855609739915,648.875,599.2525461119958,660.875,592.6679397226645,673.0206598251508C586.0833333333334,685.1663196503017,566.6471354166666,697.4576393006032,556.9290364583334,703.603299125754L547.2109375,709.7489589509048" id="L-MergeLoggedInLoggedOut-LoggedInHomeScreen-1" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-MergeLoggedInLoggedOut LE-LoggedInHomeScreen" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M778.1884205812103,636.875L786.3399598593419,642.875C794.4914991374735,648.875,810.7945776937368,660.875,818.9461169718684,672.875C827.09765625,684.875,827.09765625,696.875,827.09765625,702.875L827.09765625,708.875" id="L-MergeLoggedInLoggedOut-LoggedOutHomeScreen-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-MergeLoggedInLoggedOut LE-LoggedOutHomeScreen" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M926.3125,258.0008534039582L966.6336805555557,244.83404450329851C1006.9548611111112,231.6672356026388,1087.5972222222224,205.3336178013194,1137.9986979166667,192.1668089006597C1188.4001736111113,179,1208.560763888889,179,1228.7213541666667,217.15625C1248.8819444444446,255.3125,1269.0425347222224,331.625,1269.0425347222224,407.9375C1269.0425347222224,484.25,1248.8819444444446,560.5625,1228.7213541666667,598.71875C1208.560763888889,636.875,1188.4001736111113,636.875,1137.9986979166667,623.7081910993403C1087.5972222222224,610.5413821986806,1006.9548611111112,584.2077643973612,966.6336805555557,571.0409554967015L926.3125,557.8741465960418" id="L-MergeLoggedInLoggedOut-MergeLoggedInLoggedOut-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-MergeLoggedInLoggedOut LE-MergeLoggedInLoggedOut" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(467.15625, 145)"><g class="label" transform="translate(-141.859375, -9)"><foreignObject width="283.71875" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><font color="#aaa">Log In - Existing pre-login local changes</font></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(328.79296875, 672.875)"><g class="label" transform="translate(-99.1796875, -9)"><foreignObject width="198.359375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><font color="#aaa">Discard logged out changes</font></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(605.51953125, 672.875)"><g class="label" transform="translate(-157.546875, -11)"><foreignObject width="315.09375" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><font color="#05f"><big><b>Merge logged out changes</b></big> - <i>success</i></font></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(827.09765625, 672.875)"><g class="label" transform="translate(-44.03125, -9)"><foreignObject width="88.0625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><font color="#aaa">Cancel login</font></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1289.203125, 407.9375)"><g class="label" transform="translate(-327.890625, -11)"><foreignObject width="655.78125" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><font color="#05f"><big><b>Merge logged out changes</b></big> - <i>Other device pushed an update in the middle of merging</i></font></span></div></foreignObject></g></g></g><g class="nodes"><g class="root" transform="translate(420.484375, 0)"><g class="clusters"><g class="cluster startGrey" id="Login"><rect style="" rx="0" ry="0" x="8" y="8" width="78.34375" height="103"></rect><g class="cluster-label" transform="translate(27.59375, 13)"><foreignObject width="39.15625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Login</span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default startGrey" id="flowchart-Login1-24" transform="translate(47.171875, 59.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-14.171875" y="-16.5" width="28.34375" height="33"></rect><g class="label" style="" transform="translate(-6.671875, -9)"><foreignObject width="13.34375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">...</span></div></foreignObject></g></g></g></g><g class="root" transform="translate(0.5, 171)"><g class="clusters"><g class="cluster default" id="MergeLoggedInLoggedOut"><rect style="" rx="0" ry="0" x="8" y="8" width="918.3125" height="457.875"></rect><g class="cluster-label" transform="translate(371.5234375, 13)"><foreignObject width="191.265625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MergeLoggedInLoggedOut</span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default default" id="flowchart-MergeLoggedInLoggedOut1-42" transform="translate(467.15625, 89.21875)"><rect class="basic label-container" style="" rx="0" ry="0" x="-387.5625" y="-46.21875" width="775.125" height="92.4375"></rect><g class="label" style="" transform="translate(-380.0625, -38.71875)"><foreignObject width="760.125" height="77.4375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><h3>Prompt</h3>Before you logged in, you took some actions that were saved to your wallet. Would you like to merge them?</span></div></foreignObject></g></g><g class="node default default" id="flowchart-MergeLoggedInLoggedOut2-43" transform="translate(467.15625, 257.65625)"><rect class="basic label-container" style="" rx="0" ry="0" x="-126.6796875" y="-72.21875" width="253.359375" height="144.4375"></rect><g class="label" style="" transform="translate(-119.1796875, -64.71875)"><foreignObject width="238.359375" height="129.4375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><h3>Buttons</h3><ul><li>Discard logged out changes</li><li>Merge logged out changes</li><li>Don't log in for now</li></ul></span></div></foreignObject></g></g><g class="node default editorNote" id="flowchart-MergeLoggedInLoggedOut3-29" transform="translate(467.15625, 405.375)"><rect class="basic label-container" style="" rx="0" ry="0" x="-434.15625" y="-25.5" width="868.3125" height="51"></rect><g class="label" style="" transform="translate(-426.65625, -18)"><foreignObject width="853.3125" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"><i>this is a complicated part<br/>this is unlike normal conflict resolution because the baseline is zero, and also the logged out wallet's keypair is discarded</i></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(787.92578125, 700.875)"><g class="clusters"><g class="cluster finishGrey" id="LoggedOutHomeScreen"><rect style="" rx="0" ry="0" x="-39.109375" y="8" width="172.5625" height="103"></rect><g class="cluster-label" transform="translate(-39.109375, 13)"><foreignObject width="172.5625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">LoggedOutHomeScreen</span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default finishGrey" id="flowchart-LoggedOutHomeScreen1-28" transform="translate(47.171875, 59.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-14.171875" y="-16.5" width="28.34375" height="33"></rect><g class="label" style="" transform="translate(-6.671875, -9)"><foreignObject width="13.34375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">...</span></div></foreignObject></g></g></g></g><g class="root" transform="translate(427.984375, 700.875)"><g class="clusters"><g class="cluster finishGrey" id="LoggedInHomeScreen"><rect style="" rx="0" ry="0" x="-32.8828125" y="8" width="160.109375" height="103"></rect><g class="cluster-label" transform="translate(-32.8828125, 13)"><foreignObject width="160.109375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">LoggedInHomeScreen</span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default finishGrey" id="flowchart-LoggedInHomeScreen1-26" transform="translate(47.171875, 59.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-14.171875" y="-16.5" width="28.34375" height="33"></rect><g class="label" style="" transform="translate(-6.671875, -9)"><foreignObject width="13.34375" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">...</span></div></foreignObject></g></g></g></g></g></g></g></svg>